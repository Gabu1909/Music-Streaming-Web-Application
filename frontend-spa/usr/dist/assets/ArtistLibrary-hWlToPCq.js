import{_ as w,b,l as h,d as C,c as o,a as s,g as i,t as x,j as S,F as v,k as y,p as B,z as D,y as L,o as a,i as m,B as I}from"./index-CJw3wfj_.js";import{A as _}from"./ArtistCard-Dsjpyy2w.js";const V={class:"artists-view"},q={class:"container py-8"},z={key:0,class:"loading-state"},E={key:1,class:"error-state"},F={class:"error-text"},N={key:2},R={key:0,class:"section py-4"},j={class:"featured-slider"},H={class:"section"},T={class:"section-header"},U={class:"sort-options"},$={class:"artist-masonry"},G={__name:"ArtistLibrary",setup(K){const f=L(),l=b("popular"),{data:c,isLoading:g,error:u,refetch:n}=h({queryKey:["artists",l],queryFn:async()=>{const r=await I.getAllArtists({sort:l.value}),t=r?.data?.artists||r?.artists||(Array.isArray(r)?r:[]);if(!t.length)throw new Error("Artist database empty");return t}}),d=C(()=>{if(!c.value)return[];const r=[...c.value];switch(l.value){case"popular":return r.sort((t,e)=>(e.followers||0)-(t.followers||0));case"newest":return r.sort((t,e)=>new Date(e.created_at||0)-new Date(t.created_at||0));case"a-z":return r.sort((t,e)=>(t.name||"").localeCompare(e.name||""));default:return r}}),p=r=>{if(!r){console.error("Invalid artist ID");return}f.push({name:"artist-detail",params:{id:r}})},k=()=>{document.querySelector(".section").scrollIntoView({behavior:"smooth"})};return(r,t)=>(a(),o("div",V,[s("div",{class:"hero-banner",style:{backgroundImage:"url(/uploads/img/cover-artist.jpg)"}},[s("div",{class:"overlay"},[s("div",{class:"container"},[t[3]||(t[3]=s("h1",{class:"hero-title"},"Artists Hub",-1)),t[4]||(t[4]=s("p",{class:"hero-subtitle"},"Unleash the sound of tomorrow",-1)),s("button",{onClick:k,class:"explore-btn"},"Explore Now")])])]),s("div",q,[i(g)?(a(),o("div",z,t[5]||(t[5]=[s("div",{class:"spinner"},null,-1),s("p",{class:"loading-text"},"Syncing artists...",-1)]))):i(u)?(a(),o("div",E,[t[6]||(t[6]=s("i",{class:"fas fa-exclamation-triangle"},null,-1)),s("p",F,x(i(u).message),1),s("button",{onClick:t[0]||(t[0]=(...e)=>i(n)&&i(n)(...e)),class:"retry-btn"},"Retry Sync")])):(a(),o("div",N,[d.value.length>0?(a(),o("div",R,[t[7]||(t[7]=s("h2",{class:"section-title"},"Spotlight Artists",-1)),s("div",j,[(a(!0),o(v,null,y(d.value.slice(0,5),e=>(a(),m(_,{key:e.artist_id,artist:e,onClick:A=>p(e.artist_id),class:"featured-card"},null,8,["artist","onClick"]))),128))])])):S("",!0),s("div",H,[s("div",T,[t[9]||(t[9]=s("h2",{class:"section-title"},"Artist Gallery",-1)),s("div",U,[B(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),class:"form-select",onChange:t[2]||(t[2]=(...e)=>i(n)&&i(n)(...e))},t[8]||(t[8]=[s("option",{value:"popular"},"Top Hits",-1),s("option",{value:"newest"},"Latest Additions",-1),s("option",{value:"a-z"},"Alphabetical",-1)]),544),[[D,l.value]])])]),s("div",$,[(a(!0),o(v,null,y(d.value,e=>(a(),m(_,{key:e.id,artist:e,onClick:A=>p(e.artist_id),class:"masonry-card"},null,8,["artist","onClick"]))),128))])])]))])]))}},J=w(G,[["__scopeId","data-v-d7e7adc3"]]);export{J as default};
