import{l as k,d as _,B as A,_ as $,u as P,b as V,x as E,e as N,c as u,j as d,a as s,i as j,g as a,h as K,t as h,f as S,F as M,k as R,C as L,o as n,w as T,M as U}from"./index-CJw3wfj_.js";import{_ as F}from"./TrackList-LyJ0AD-6.js";function H(r){const{data:m,isLoading:y,error:g,refetch:p}=k({queryKey:["artist",r],queryFn:async()=>(await A.getArtistDetails(r)).data?.artist||{},onError:t=>{console.error("Failed to fetch artist details:",t)}}),{data:c}=k({queryKey:["artistSongs",r],queryFn:async()=>((await A.getArtistSongs(r)).data?.songs||[]).map(e=>({...e,id:e.song_id||e.id||`${r}-${e.title}`,artist:e.artist||m.value?.name||"Unknown Artist",audio_url:e.audio_url||""})),onError:t=>{console.error("Failed to fetch artist songs:",t)}}),{data:f}=k({queryKey:["artistAlbums",r],queryFn:async()=>(await A.getAlbumsByArtist(r)).data?.albums||[],onError:t=>{console.error("Failed to fetch artist albums:",t)}});return{artist:_(()=>m.value||{}),artistSongs:_(()=>c.value||[]),artistAlbums:_(()=>f.value||[]),isLoading:y,error:g,refetch:p}}const Q={class:"artist-detail"},z={key:0,class:"artist-header"},G=["src"],J={class:"artist-info"},O={key:0,class:"artist-bio"},W={class:"artist-actions"},X=["disabled"],Y={class:"artist-content mt-4"},Z={key:1,class:"artist-content mt-4"},I={key:2,class:"artist-albums mt-5"},tt={class:"album-list"},st={class:"album-card"},at=["src"],et={class:"album-title"},rt={__name:"ArtistDetail",setup(r){const m=E(),{currentSong:y,initAudio:g,playSong:p}=P(),c=V(null),f=m.params.id,{artist:t,artistSongs:b,artistAlbums:e}=H(f),C=_(()=>b.value?.slice(0,5)||[]),i=_(()=>b.value||[]),D=o=>o?`/${o.replace(/^public\//,"")}`:"/default-artist.jpg",q=o=>o?`/${o.replace(/^public\//,"")}`:"/default-album.jpg",x=async()=>{i.value.length&&await p(i.value[0],i.value)},w=async o=>{await p(o,i.value)};return N(async()=>{c.value&&g(c.value)}),(o,l)=>{const B=L("router-link");return n(),u("div",Q,[a(t)&&(a(t).id||a(t).artist_id)?(n(),u("div",z,[s("img",{class:"artist-image",src:D(a(t).avatar_url),alt:"Artist Image"},null,8,G),s("div",J,[s("h1",null,[K(h(a(t).name),1),l[0]||(l[0]=s("span",{class:"verified-icon fas fa-check-circle",title:"Verified Artist"},null,-1))]),a(t).bio?(n(),u("p",O,h(a(t).bio),1)):d("",!0),s("div",W,[s("button",{class:"play-btn",onClick:x,disabled:!i.value.length},"Play All",8,X)])])])):d("",!0),s("div",Y,[l[1]||(l[1]=s("h2",null,"Popular Tracks",-1)),S(F,{tracks:C.value,onPlay:w},null,8,["tracks"])]),i.value.length?(n(),u("div",Z,[l[2]||(l[2]=s("h2",null,"All Songs",-1)),S(F,{tracks:i.value,onPlay:w},null,8,["tracks"])])):d("",!0),a(e)&&a(e).length?(n(),u("div",I,[l[3]||(l[3]=s("h2",null,"Albums",-1)),s("div",tt,[(n(!0),u(M,null,R(a(e),v=>(n(),u("div",{class:"album-card",key:v.id},[S(B,{to:`/albums/${v.album_id}`,class:"album-card-link"},{default:T(()=>[s("div",st,[s("img",{class:"album-cover",src:q(v.cover_url),alt:"Album Cover"},null,8,at),s("div",et,h(v.title),1)])]),_:2},1032,["to"])]))),128))])])):d("",!0),s("audio",{ref_key:"audioRef",ref:c,preload:"metadata"},null,512),a(y)?(n(),j(U,{key:3})):d("",!0)])}}},nt=$(rt,[["__scopeId","data-v-4a8153e9"]]);export{nt as default};
