import{s as P,_ as R,u as w,b as c,e as x,x as B,I as T,c as r,a as i,t as m,j as n,F as d,k as _,y as q,o as t,i as v,A as F}from"./index-CJw3wfj_.js";import{A as L}from"./ArtistCard-Dsjpyy2w.js";import{P as N}from"./PlaylistCard-BI26ZhvQ.js";import{S as I}from"./SongCard-CvJCeDdv.js";/* empty css                                                                     */const V={async search(h){return h?await P(`/api/search?q=${h}`):{status:"error",data:{}}}},j={class:"search-view"},D={class:"search-title"},E={key:0,class:"loading"},M={key:1,class:"error"},Q={key:2},z={key:0,class:"results-section"},G={class:"results-grid"},H={key:1,class:"results-section"},J={class:"results-grid"},K={key:2,class:"results-section"},O={class:"results-grid"},U={key:3,class:"results-section"},W={class:"results-grid"},X={key:4,class:"no-results"},Y={__name:"Search",setup(h){const f=B(),y=q(),k=w(),o=c(""),l=c({artists:[],playlists:[],albums:[],songs:[]}),g=c(!1),u=c(null);async function C(a){if(a){g.value=!0,u.value=null;try{const e=await V.search(a);l.value={artists:e.data.artists||[],playlists:e.data.playlists||[],albums:e.data.albums||[],songs:e.data.songs||[]}}catch(e){console.error("Search failed:",e),u.value="Failed to fetch search results. Please try again."}finally{g.value=!1}}}function b(a){y.push(`/artists/${a}`)}function S(a){y.push(`/playlists/${a}`)}function A(a){y.push(`/albums/${a}`)}function $(a){k.setCurrentTrack(a),k.play()}return x(()=>{o.value=f.query.q||"",C(o.value)}),T(()=>f.query.q,a=>{o.value=a||"",C(o.value)}),(a,e)=>(t(),r("div",j,[i("h1",D,'Search Results for "'+m(o.value)+'"',1),g.value?(t(),r("div",E,"Loading...")):u.value?(t(),r("div",M,m(u.value),1)):(t(),r("div",Q,[l.value.songs.length?(t(),r("section",z,[e[0]||(e[0]=i("h2",{class:"section-title"},"Songs",-1)),i("div",G,[(t(!0),r(d,null,_(l.value.songs,s=>(t(),v(I,{key:s.song_id,artist:s.artist,title:s.title,song:s,image_url:s.image_url,onClick:p=>$(s)},null,8,["artist","title","song","image_url","onClick"]))),128))])])):n("",!0),l.value.artists.length?(t(),r("section",H,[e[1]||(e[1]=i("h2",{class:"section-title"},"Artists",-1)),i("div",J,[(t(!0),r(d,null,_(l.value.artists,s=>(t(),v(L,{key:s.artist_id,artist:s,onClick:p=>b(s.artist_id)},null,8,["artist","onClick"]))),128))])])):n("",!0),l.value.playlists.length?(t(),r("section",K,[e[2]||(e[2]=i("h2",{class:"section-title"},"Playlists",-1)),i("div",O,[(t(!0),r(d,null,_(l.value.playlists,s=>(t(),v(N,{key:s.playlist_id,playlist:s,onClick:p=>S(s.playlist_id)},null,8,["playlist","onClick"]))),128))])])):n("",!0),l.value.albums.length?(t(),r("section",U,[e[3]||(e[3]=i("h2",{class:"section-title"},"Albums",-1)),i("div",W,[(t(!0),r(d,null,_(l.value.albums,s=>(t(),v(F,{title:s.title,cover_url:s.cover_url,key:s.album_id,album:s,onClick:p=>A(s.album_id)},null,8,["title","cover_url","album","onClick"]))),128))])])):n("",!0),!l.value.artists.length&&!l.value.playlists.length&&!l.value.albums.length&&!l.value.songs.length?(t(),r("div",X,' No results found for "'+m(o.value)+'". ',1)):n("",!0)]))]))}},as=R(Y,[["__scopeId","data-v-843b2c05"]]);export{as as default};
