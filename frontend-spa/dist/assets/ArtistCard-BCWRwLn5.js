import{_ as b,z as x,g as A,j as c,x as k,c as o,o as i,a as r,d,w as C,t as l}from"./index-BH3AGQtF.js";const S={class:"artist-image-container mx-auto mb-3"},F=["src","alt"],I={class:"play-button-overlay"},N={key:0,class:"artist-badge"},j={class:"artist-name text-truncate"},q={key:0,class:"artist-label text-muted"},B="/uploads/img/default-playlist.png",P={__name:"ArtistCard",props:{artist:{type:Object,required:!0,validator:s=>s.artist_id&&s.name}},emits:["play"],setup(s,{emit:u}){const g=x(),{playSong:m}=A(),n=s,f=t=>{if(!t)return"/default-artist.jpg";let a=t.replace(/^\/?public\//,"");return a.startsWith("/uploads/")&&(a=a.slice(1)),"/"+a},p=u,y=c(()=>{const t=n.artist.avatar_url;return t?t.startsWith("/")?"/"+t.replace("/",""):t:B}),e=c(()=>n.artist.artist_id),{data:$,refetch:v}=k({queryKey:["artistSongs",e],queryFn:async()=>{const t=await artistService.getArtistSongs(e.value);return t?.data?.songs||t.songs||[]},enabled:!1}),h=async t=>{t.stopPropagation();try{const{data:a}=await v();a.length?(await m(a[0],a),p("play",e.value)):console.error("No songs available for artist:",e.value)}catch(a){console.error("Failed to play artist songs:",a)}},w=()=>{console.log("Navigating to artist:",e.value),g.push({name:"artist-detail",params:{id:e.value.toString()}})},_=t=>t?t>=1e6?`${(t/1e6).toFixed(1)}M followers`:t>=1e3?`${(t/1e3).toFixed(1)}K followers`:`${t} followers`:"0 followers";return(t,a)=>(i(),o("div",{class:"artist-card text-center",onClick:w},[r("div",S,[r("img",{src:f(y.value),class:"artist-image rounded-circle",alt:s.artist.name,loading:"lazy"},null,8,F),r("div",I,[r("button",{class:"play-button",onClick:C(h,["stop"])},a[0]||(a[0]=[r("i",{class:"fas fa-play"},null,-1)]))]),s.artist.genre?(i(),o("div",N,l(s.artist.genre),1)):d("",!0)]),r("h5",j,l(s.artist.name),1),s.artist.followers?(i(),o("p",q,l(_(s.artist.followers)),1)):d("",!0)]))}},K=b(P,[["__scopeId","data-v-729d0edd"]]);export{K as A};
