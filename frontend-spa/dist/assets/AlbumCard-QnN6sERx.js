import{_ as f,c as o,o as c,a as d,d as r,w as D,t as g,n as m,g as h,j as y}from"./index-DTmEoMLP.js";const k={name:"MediaCard",props:{title:{type:String,required:!0},artist:{type:String,default:""},description:{type:String,default:""},cover_url:{type:String,required:!0},showPlayButton:{type:Boolean,default:!0},songData:Object},emits:["click","play"],setup(t,{emit:s}){const a=h(),n=y(()=>{if(!t.songData||!t.songData.id&&!t.songData._id)return!1;const e=a.state.currentSong?.id,i=t.songData.id||t.songData._id;return e===i&&a.state.isPlaying}),u=y(()=>{if(!t.songData||!t.songData.id&&!t.songData._id)return!1;const e=a.state.currentSong?.id,i=t.songData.id||t.songData._id;return a.state.isLoading&&e===i});return{isPlaying:n,isLoading:u,handlePlayClick:async()=>{if(!t.songData||!t.songData.id&&!t.songData._id){s("play");return}s("play",t.songData);try{const e=t.songData.id||t.songData._id;if(a.state.currentSong?.id!==e){await a.playSong(t.songData);return}a.state.currentSong?await a.togglePlay():await a.playSong(t.songData)}catch(e){console.error("Error playing song:",e)}},getAlbumCover:e=>{if(!e)return"/default-artist.jpg";const i=e.replace(/^\/?public/,"");return i.startsWith("/")?i:"/"+i}}}},C={class:"card-image-container"},b=["src","alt"],v=["disabled"],P={key:0,class:"fas fa-spinner fa-spin"},S={key:1,class:"fas fa-pause"},w={key:2,class:"fas fa-play"},B={class:"card-body"},I={class:"card-title"},A={key:0,class:"card-subtitle"},j={key:1,class:"card-description"};function L(t,s,a,n,u,_){return c(),o("div",{class:m(["media-card",{"has-description":a.description}]),onClick:s[1]||(s[1]=l=>t.$emit("click"))},[d("div",C,[d("img",{src:n.getAlbumCover(a.cover_url)||"/uploads/img/default-cover.jpg",class:"card-image",alt:`${a.title} cover`,loading:"lazy"},null,8,b),a.showPlayButton?(c(),o("button",{key:0,class:"play-button",onClick:s[0]||(s[0]=D((...l)=>n.handlePlayClick&&n.handlePlayClick(...l),["stop"])),disabled:n.isLoading||!a.songData},[n.isLoading?(c(),o("i",P)):n.isPlaying?(c(),o("i",S)):(c(),o("i",w))],8,v)):r("",!0)]),d("div",B,[d("h5",I,g(a.title),1),a.artist?(c(),o("p",A,g(a.artist),1)):r("",!0),a.description?(c(),o("p",j,g(a.description),1)):r("",!0)])],2)}const x=f(k,[["render",L],["__scopeId","data-v-ae22cd9c"]]);export{x as A};
