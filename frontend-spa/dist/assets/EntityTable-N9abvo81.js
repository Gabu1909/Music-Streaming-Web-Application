import{_ as f,c as r,a as n,d as m,f as k,t as c,e as P,v,F as h,q as g,o as l,n as b}from"./index-CFB-G1Nn.js";const p={name:"EntityTable",props:{columns:{type:Array,required:!0},rows:{type:Array,default:()=>[]},tableTitle:{type:String,default:"Data Table"},tableIcon:{type:String,default:"üìã"},entityName:{type:String,default:"items"},searchPlaceholder:{type:String,default:"Search..."},addButtonText:{type:String,default:"Add New"},emptyMessage:{type:String,default:"Try adjusting your search or add new items"},showPlayButton:{type:Boolean,default:!1},itemsPerPage:{type:Number,default:10},searchableColumns:{type:Array,default:()=>[]}},emits:["add","edit","delete","view","play"],data(){return{searchQuery:"",currentPage:1,sortBy:null,sortOrder:"asc"}},computed:{filteredRows(){if(!this.searchQuery.trim())return this.sortedRows;const e=this.searchQuery.toLowerCase(),t=this.searchableColumns.length>0?this.searchableColumns:this.columns.filter(a=>a.type!=="actions").map(a=>a.key);return this.sortedRows.filter(a=>t.some(d=>{const u=a[d];return u&&String(u).toLowerCase().includes(e)}))},sortedRows(){return this.sortBy?[...this.rows].sort((e,t)=>{let a=e[this.sortBy],d=t[this.sortBy];a==null&&(a=""),d==null&&(d=""),a=String(a).toLowerCase(),d=String(d).toLowerCase();let u=a.localeCompare(d);return this.sortOrder==="desc"?-u:u}):[...this.rows]},totalPages(){return Math.ceil(this.filteredRows.length/this.itemsPerPage)},paginatedRows(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredRows.slice(e,t)},startItem(){return(this.currentPage-1)*this.itemsPerPage+1},endItem(){return Math.min(this.currentPage*this.itemsPerPage,this.filteredRows.length)},visiblePages(){const e=[],t=Math.max(1,this.currentPage-2),a=Math.min(this.totalPages,this.currentPage+2);for(let d=t;d<=a;d++)e.push(d);return e}},watch:{searchQuery(){this.currentPage=1},rows(){this.currentPage=1}},methods:{getRowKey(e,t){return e.artist_id||e.song_id||e.user_id||e.id||e.album_id||t},toggleSort(e){this.sortBy===e?this.sortOrder=this.sortOrder==="asc"?"desc":"asc":(this.sortBy=e,this.sortOrder="asc")},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},confirmDelete(e){const t=e.username||e.name||e.title||e.email||"this item";confirm(`Are you sure you want to delete "${t}"?`)&&this.$emit("delete",e)},getInitials(e){return e?e.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2):"?"},getBadgeClasses(e){const t="badge-cell",a=String(e).toLowerCase();return["admin","active","published","public"].includes(a)?`${t} badge-success`:["inactive","private","draft"].includes(a)?`${t} badge-warning`:["banned","deleted"].includes(a)?`${t} badge-danger`:`${t} badge-default`},getBooleanClasses(e){return e?"boolean-cell boolean-active":"boolean-cell boolean-inactive"},getPageButtonClasses(e){return e===this.currentPage?"page-button page-button-active":"page-button"},formatDate(e){if(!e)return"-";try{return new Date(e).toLocaleDateString()}catch{return e}},formatDuration(e){if(!e)return"-";const t=Math.floor(e/60),a=Math.floor(e%60);return`${t}:${a.toString().padStart(2,"0")}`},formatFileSize(e){if(!e)return"-";const t=1024,a=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,d)).toFixed(2))+" "+a[d]},truncateText(e,t){if(!e)return"-";const a=String(e);return a.length>t?a.substring(0,t)+"...":a},getImgCover(e){return e?`/uploads/img/${e.replace(/^public\/|\/public\/uploads\/images\//g,"").replace(/\/+/g,"/").split("/").pop()||"default-artists.jpg"}`:"/default-artists.jpg"}}},C={class:"table-container"},B={class:"table-header-section"},S={class:"header-left-section"},T={class:"table-title-text"},w={class:"title-icon-text"},x={class:"item-count-text"},M={class:"header-right-section"},R={class:"search-container"},D=["placeholder"],I={class:"table-scroll-wrapper"},N={class:"data-table"},V=["onClick"],F={class:"header-cell"},L={key:0,class:"sort-indicator"},z={key:0,class:"avatar-container"},A=["src","alt"],O={key:1,class:"avatar-placeholder-circle"},Q={key:2,class:"date-text"},E={key:3,class:"duration-text"},j={key:4,class:"file-size-text"},q={key:6,class:"inline-actions"},K=["onClick"],U=["onClick"],G=["onClick"],Y=["title"],H={key:0,class:"empty-row"},J=["colspan"],W={class:"empty-state-container"},X={key:0,class:"pagination-container"},Z={class:"pagination-info"},$={class:"pagination-controls"},ee=["disabled"],te=["disabled"],se={class:"page-numbers-container"},ae=["onClick"],ne=["disabled"],ie=["disabled"];function re(e,t,a,d,u,i){return l(),r("div",C,[n("div",B,[n("div",S,[n("h3",T,[n("span",w,c(a.tableIcon),1),k(" "+c(a.tableTitle)+" ",1),n("span",x,"("+c(i.filteredRows.length)+" items)",1)])]),n("div",M,[n("div",R,[P(n("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.searchQuery=s),type:"text",placeholder:a.searchPlaceholder,class:"search-input-field"},null,8,D),[[v,u.searchQuery]])]),n("button",{onClick:t[1]||(t[1]=s=>e.$emit("add")),class:"add-button"}," ‚ûï "+c(a.addButtonText),1)])]),n("div",I,[n("table",N,[n("thead",null,[n("tr",null,[(l(!0),r(h,null,g(a.columns,s=>(l(),r("th",{key:s.key,onClick:y=>s.sortable?i.toggleSort(s.key):null},[n("div",F,[n("span",null,c(s.label),1),u.sortBy===s.key&&s.sortable?(l(),r("span",L,c(u.sortOrder==="asc"?"‚Üë":"‚Üì"),1)):m("",!0)])],8,V))),128))])]),n("tbody",null,[(l(!0),r(h,null,g(i.paginatedRows,(s,y)=>(l(),r("tr",{key:i.getRowKey(s,y),class:"data-row"},[(l(!0),r(h,null,g(a.columns,o=>(l(),r("td",{key:o.key},[o.type==="avatar"?(l(),r("div",z,[s[o.key]?(l(),r("img",{key:0,src:i.getImgCover(s[o.key]),alt:s.name,class:"avatar-image"},null,8,A)):(l(),r("div",O,c(i.getInitials(s.name||s.username||s.title)),1))])):o.type==="badge"?(l(),r("span",{key:1,class:b(i.getBadgeClasses(s[o.key]))},c(s[o.key]),3)):o.type==="date"?(l(),r("span",Q,c(i.formatDate(s[o.key])),1)):o.type==="duration"?(l(),r("span",E,c(i.formatDuration(s[o.key])),1)):o.type==="file-size"?(l(),r("span",j,c(i.formatFileSize(s[o.key])),1)):o.type==="boolean"?(l(),r("span",{key:5,class:b(i.getBooleanClasses(s[o.key]))},c(s[o.key]?"Yes":"No"),3)):o.type==="actions"?(l(),r("div",q,[n("button",{onClick:_=>e.$emit("view",s),class:"action-btn view-btn",title:"View Details"}," üëÅÔ∏è ",8,K),n("button",{onClick:_=>e.$emit("edit",s),class:"action-btn edit-btn",title:"Edit"}," ‚úèÔ∏è ",8,U),n("button",{onClick:_=>i.confirmDelete(s),class:"action-btn delete-btn",title:"Delete"}," üóëÔ∏è ",8,G)])):(l(),r("span",{key:7,class:"cell-text",title:s[o.key]},c(i.truncateText(s[o.key],o.maxLength||50)),9,Y))]))),128))]))),128)),i.filteredRows.length===0?(l(),r("tr",H,[n("td",{colspan:a.columns.length,class:"empty-cell"},[n("div",W,[n("h4",null,"No "+c(a.entityName)+" Found",1),n("p",null,c(a.emptyMessage),1)])],8,J)])):m("",!0)])])]),i.totalPages>1?(l(),r("div",X,[n("div",Z," Showing "+c(i.startItem)+" to "+c(i.endItem)+" of "+c(i.filteredRows.length)+" entries ",1),n("div",$,[n("button",{onClick:t[2]||(t[2]=s=>i.goToPage(1)),disabled:u.currentPage===1,class:"pagination-button"}," ‚èÆÔ∏è ",8,ee),n("button",{onClick:t[3]||(t[3]=s=>i.goToPage(u.currentPage-1)),disabled:u.currentPage===1,class:"pagination-button"}," ‚¨ÖÔ∏è ",8,te),n("div",se,[(l(!0),r(h,null,g(i.visiblePages,s=>(l(),r("button",{key:s,onClick:y=>i.goToPage(s),class:b(i.getPageButtonClasses(s))},c(s),11,ae))),128))]),n("button",{onClick:t[4]||(t[4]=s=>i.goToPage(u.currentPage+1)),disabled:u.currentPage===i.totalPages,class:"pagination-button"}," ‚û°Ô∏è ",8,ne),n("button",{onClick:t[5]||(t[5]=s=>i.goToPage(i.totalPages)),disabled:u.currentPage===i.totalPages,class:"pagination-button"}," ‚è≠Ô∏è ",8,ie)])])):m("",!0)])}const oe=f(p,[["render",re],["__scopeId","data-v-144b1704"]]);export{oe as E};
