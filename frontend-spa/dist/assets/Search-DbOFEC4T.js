import{K as P,_ as R,g as q,h as c,k as w,A as B,I as T,c as r,a as o,t as p,d as n,F as d,q as _,z as x,o as t,m as v}from"./index-BH3AGQtF.js";import{A as F}from"./ArtistCard-BCWRwLn5.js";import{P as L}from"./PlaylistCard-BjIPS2iP.js";import{A as N}from"./AlbumCard-BOcrsBrV.js";import{S as I}from"./SongCard-C3pc5isg.js";/* empty css                                                                     */const V={async search(h){return h?await P(`/api/search?q=${h}`):{status:"error",data:{}}}},z={class:"search-view"},D={class:"search-title"},E={key:0,class:"loading"},K={key:1,class:"error"},M={key:2},Q={key:0,class:"results-section"},j={class:"results-grid"},G={key:1,class:"results-section"},H={class:"results-grid"},J={key:2,class:"results-section"},O={class:"results-grid"},U={key:3,class:"results-section"},W={class:"results-grid"},X={key:4,class:"no-results"},Y={__name:"Search",setup(h){const f=B(),y=x(),k=q(),i=c(""),l=c({artists:[],playlists:[],albums:[],songs:[]}),g=c(!1),u=c(null);async function C(a){if(a){g.value=!0,u.value=null;try{const e=await V.search(a);l.value={artists:e.data.artists||[],playlists:e.data.playlists||[],albums:e.data.albums||[],songs:e.data.songs||[]}}catch(e){console.error("Search failed:",e),u.value="Failed to fetch search results. Please try again."}finally{g.value=!1}}}function b(a){y.push(`/artists/${a}`)}function S(a){y.push(`/playlists/${a}`)}function A(a){y.push(`/albums/${a}`)}function $(a){k.setCurrentTrack(a),k.play()}return w(()=>{i.value=f.query.q||"",C(i.value)}),T(()=>f.query.q,a=>{i.value=a||"",C(i.value)}),(a,e)=>(t(),r("div",z,[o("h1",D,'Search Results for "'+p(i.value)+'"',1),g.value?(t(),r("div",E,"Loading...")):u.value?(t(),r("div",K,p(u.value),1)):(t(),r("div",M,[l.value.songs.length?(t(),r("section",Q,[e[0]||(e[0]=o("h2",{class:"section-title"},"Songs",-1)),o("div",j,[(t(!0),r(d,null,_(l.value.songs,s=>(t(),v(I,{key:s.song_id,artist:s.artist,title:s.title,song:s,image_url:s.image_url,onClick:m=>$(s)},null,8,["artist","title","song","image_url","onClick"]))),128))])])):n("",!0),l.value.artists.length?(t(),r("section",G,[e[1]||(e[1]=o("h2",{class:"section-title"},"Artists",-1)),o("div",H,[(t(!0),r(d,null,_(l.value.artists,s=>(t(),v(F,{key:s.artist_id,artist:s,onClick:m=>b(s.artist_id)},null,8,["artist","onClick"]))),128))])])):n("",!0),l.value.playlists.length?(t(),r("section",J,[e[2]||(e[2]=o("h2",{class:"section-title"},"Playlists",-1)),o("div",O,[(t(!0),r(d,null,_(l.value.playlists,s=>(t(),v(L,{key:s.playlist_id,playlist:s,onClick:m=>S(s.playlist_id)},null,8,["playlist","onClick"]))),128))])])):n("",!0),l.value.albums.length?(t(),r("section",U,[e[3]||(e[3]=o("h2",{class:"section-title"},"Albums",-1)),o("div",W,[(t(!0),r(d,null,_(l.value.albums,s=>(t(),v(N,{title:s.title,cover_url:s.cover_url,key:s.album_id,album:s,onClick:m=>A(s.album_id)},null,8,["title","cover_url","album","onClick"]))),128))])])):n("",!0),!l.value.artists.length&&!l.value.playlists.length&&!l.value.albums.length&&!l.value.songs.length?(t(),r("div",X,' No results found for "'+p(i.value)+'". ',1)):n("",!0)]))]))}},rs=R(Y,[["__scopeId","data-v-843b2c05"]]);export{rs as default};
