import{_ as g,c as a,d as r,a as l,f as h,t as o,w as f,r as F,o as n,F as v,q as y,n as _}from"./index-CFB-G1Nn.js";const b={name:"BaseModal",props:{show:{type:Boolean,default:!1},mode:{type:String,default:"add",validator:i=>["add","edit"].includes(i)},title:{type:String,required:!0},icon:{type:String},formData:{type:Object,default:()=>({})},isFormValid:{type:Boolean,default:!0},isSaving:{type:Boolean,default:!1},saveButtonText:{type:String,default:""}},emits:["save","cancel"],computed:{modalIcon(){return this.icon},modalTitle(){return`${this.mode==="edit"?"Edit":"Add New"} ${this.title}`},computedSaveButtonText(){return this.saveButtonText?this.saveButtonText:`${this.mode==="edit"?"Update":"Add"} ${this.title}`}},methods:{handleOverlayClick(){this.$emit("cancel")},handleSubmit(){this.isFormValid&&!this.isSaving&&this.$emit("save")}}},k={class:"modal-header"},w={class:"modal-icon"},q={class:"modal-actions"},S=["disabled"],C={key:0,class:"loading-spinner"};function V(i,t,e,u,c,d){return e.show?(n(),a("div",{key:0,class:"modal-overlay",onClick:t[4]||(t[4]=(...s)=>d.handleOverlayClick&&d.handleOverlayClick(...s))},[l("div",{class:"modal-content",onClick:t[3]||(t[3]=f(()=>{},["stop"])),ref:"modalContent"},[l("div",k,[l("h2",null,[l("span",w,o(d.modalIcon),1),h(" "+o(d.modalTitle),1)]),l("button",{onClick:t[0]||(t[0]=s=>i.$emit("cancel")),class:"close-btn",type:"button"},t[5]||(t[5]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),l("form",{onSubmit:t[2]||(t[2]=f((...s)=>d.handleSubmit&&d.handleSubmit(...s),["prevent"])),class:"modal-form"},[F(i.$slots,"form-content",{formData:e.formData,isFormValid:e.isFormValid},void 0),l("div",q,[l("button",{type:"button",onClick:t[1]||(t[1]=s=>i.$emit("cancel")),class:"btn btn-cancel"}," Cancel "),l("button",{type:"submit",class:"btn btn-primary",disabled:e.isSaving||!e.isFormValid},[t[6]||(t[6]=h("Save ")),e.isSaving?(n(),a("div",C)):r("",!0),h(" "+o(e.isSaving?"Saving...":e.saveButtonText),1)],8,S)])],32)],512)])):r("",!0)}const be=g(b,[["render",V],["__scopeId","data-v-5e7e97d7"]]),B={name:"FormFields",props:{type:{type:String,required:!0,validator:i=>["text","email","password","date","select","textarea","file","row"].includes(i)},label:{type:String,default:""},modelValue:{type:[String,Number,File,Array],default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},note:{type:String,default:""},options:{type:Array,default:()=>[]},rows:{type:Number,default:4},accept:{type:String,default:"*/*"},multiple:{type:Boolean,default:!1},maxSize:{type:Number,default:10*1024*1024},minLength:{type:Number,default:6}},emits:["update:modelValue","file-selected","file-removed"],data(){return{selectedFile:null,selectedFiles:[],filePreview:null}},computed:{hasFile(){return this.multiple?this.selectedFiles.length>0:!!this.selectedFile},fileButtonText(){return this.multiple?this.selectedFiles.length>0?`${this.selectedFiles.length} files selected`:`Choose ${this.label||"Files"}`:this.selectedFile?this.selectedFile.name:`Choose ${this.label||"File"}`}},methods:{updateValue(i){this.$emit("update:modelValue",i)},openFileDialog(){this.$refs.fileInput&&this.$refs.fileInput.click()},handleFileChange(i){const t=Array.from(i.target.files||[]);if(t.length!==0)if(console.log(`Files selected: ${t.length}`,t.map(e=>e.name)),this.multiple){const e=[];t.forEach(u=>{this.validateFile(u)&&e.push(u)}),e.length>0&&(this.selectedFiles=e,this.$emit("file-selected",e),console.log(`Valid files selected: ${e.length}`))}else{const e=t[0];e&&this.validateFile(e)&&(this.selectedFile=e,this.$emit("file-selected",e),console.log(`File selected: ${e.name}`),this.accept&&this.accept.includes("image")&&this.createFilePreview(e))}},validateFile(i){return console.log(`ðŸ” Validating file: ${i.name}`,{type:i.type,size:this.formatFileSize(i.size),accept:this.accept}),this.accept&&this.accept!=="*/*"&&!this.accept.split(",").map(u=>u.trim()).some(u=>{if(u.startsWith("."))return i.name.toLowerCase().endsWith(u.toLowerCase());if(u.includes("*")){const c=u.split("/")[0];return i.type.startsWith(c)}return i.type===u})?(alert(`Invalid file type. Please select: ${this.accept}`),!1):i.size>this.maxSize?(alert(`File too large. Maximum size: ${this.formatFileSize(this.maxSize)}`),!1):(console.log(`File validation passed: ${i.name}`),!0)},createFilePreview(i){if(!i.type.startsWith("image/"))return;const t=new FileReader;t.onload=e=>{this.filePreview=e.target.result,console.log("Image preview created")},t.onerror=()=>{console.error("Failed to create image preview")},t.readAsDataURL(i)},removeFile(){console.log("Removing file:",this.selectedFile?.name),this.selectedFile=null,this.filePreview=null,this.$refs.fileInput&&(this.$refs.fileInput.value=""),this.$emit("file-removed")},removeFileAt(i){const t=this.selectedFiles[i];console.log("Removing file at index",i,":",t?.name),this.selectedFiles.splice(i,1),this.selectedFiles.length===0&&this.$refs.fileInput&&(this.$refs.fileInput.value="")},clearAllFiles(){console.log("ðŸ—‘ï¸ Clearing all files:",this.selectedFiles.length),this.selectedFiles=[],this.$refs.fileInput&&(this.$refs.fileInput.value=""),this.$emit("file-removed")},formatFileSize(i){if(i===0)return"0 Bytes";const t=1024,e=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(i)/Math.log(t));return parseFloat((i/Math.pow(t,u)).toFixed(2))+" "+e[u]}}},x={key:0,class:"form-group"},I={key:0,class:"required"},z=["value","placeholder","required"],p={key:0,class:"field-note"},T={key:1,class:"form-group"},A={key:0,class:"required"},M=["value","placeholder","required"],D={key:0,class:"field-note"},L={key:2,class:"form-group"},N={key:0,class:"required"},P=["value","placeholder","required","minlength"],O={key:0,class:"field-note"},R={key:3,class:"form-group"},W={key:0,class:"required"},E=["value","required"],U={key:0,class:"field-note"},j={key:4,class:"form-group"},G={key:0,class:"required"},K=["value","required"],H={value:""},J=["value"],Q={key:0,class:"field-note"},X={key:5,class:"form-group"},Y={key:0,class:"required"},Z=["value","placeholder","required","rows"],$={key:0,class:"field-note"},ee={key:6,class:"form-group"},te={key:0,class:"required"},le={class:"file-upload-container"},ie=["accept","multiple"],se={key:0,class:"file-details"},ae={class:"file-info"},ne={key:1,class:"selected-files"},de={class:"files-header"},oe={class:"files-list"},re={class:"file-info-detail"},ue={class:"file-name"},ce={class:"file-size"},he=["onClick"],me={key:0,class:"field-note"},fe={key:1,class:"image-preview"},ve=["src","alt"],ye={key:7,class:"form-row"};function ge(i,t,e,u,c,d){return n(),a("div",null,[e.type==="text"?(n(),a("div",x,[l("label",null,[h(o(e.label)+" ",1),e.required?(n(),a("span",I,"*")):r("",!0)]),l("input",{value:e.modelValue,onInput:t[0]||(t[0]=s=>d.updateValue(s.target.value)),type:"text",placeholder:e.placeholder,required:e.required},null,40,z),e.note?(n(),a("div",p,o(e.note),1)):r("",!0)])):e.type==="email"?(n(),a("div",T,[l("label",null,[h(o(e.label)+" ",1),e.required?(n(),a("span",A,"*")):r("",!0)]),l("input",{value:e.modelValue,onInput:t[1]||(t[1]=s=>d.updateValue(s.target.value)),type:"email",placeholder:e.placeholder,required:e.required},null,40,M),e.note?(n(),a("div",D,o(e.note),1)):r("",!0)])):e.type==="password"?(n(),a("div",L,[l("label",null,[h(o(e.label)+" ",1),e.required?(n(),a("span",N,"*")):r("",!0)]),l("input",{value:e.modelValue,onInput:t[2]||(t[2]=s=>d.updateValue(s.target.value)),type:"password",placeholder:e.placeholder,required:e.required,minlength:e.minLength},null,40,P),e.note?(n(),a("div",O,o(e.note),1)):r("",!0)])):e.type==="date"?(n(),a("div",R,[l("label",null,[h(o(e.label)+" ",1),e.required?(n(),a("span",W,"*")):r("",!0)]),l("input",{value:e.modelValue,onInput:t[3]||(t[3]=s=>d.updateValue(s.target.value)),type:"date",required:e.required},null,40,E),e.note?(n(),a("div",U,o(e.note),1)):r("",!0)])):e.type==="select"?(n(),a("div",j,[l("label",null,[h(o(e.label)+" ",1),e.required?(n(),a("span",G,"*")):r("",!0)]),l("select",{value:e.modelValue,onChange:t[4]||(t[4]=s=>d.updateValue(s.target.value)),required:e.required},[l("option",H,o(e.placeholder||`Select ${e.label.toLowerCase()}`),1),(n(!0),a(v,null,y(e.options,s=>(n(),a("option",{key:s.value||s,value:s.value||s},o(s.label||s),9,J))),128))],40,K),e.note?(n(),a("div",Q,o(e.note),1)):r("",!0)])):e.type==="textarea"?(n(),a("div",X,[l("label",null,[h(o(e.label)+" ",1),e.required?(n(),a("span",Y,"*")):r("",!0)]),l("textarea",{value:e.modelValue,onInput:t[5]||(t[5]=s=>d.updateValue(s.target.value)),placeholder:e.placeholder,required:e.required,rows:e.rows||4},null,40,Z),e.note?(n(),a("div",$,o(e.note),1)):r("",!0)])):e.type==="file"?(n(),a("div",ee,[l("label",null,[h(o(e.label)+" ",1),e.required?(n(),a("span",te,"*")):r("",!0)]),l("div",le,[l("input",{ref:"fileInput",onChange:t[6]||(t[6]=(...s)=>d.handleFileChange&&d.handleFileChange(...s)),type:"file",accept:e.accept,multiple:e.multiple,style:{display:"none"}},null,40,ie),l("button",{type:"button",onClick:t[7]||(t[7]=(...s)=>d.openFileDialog&&d.openFileDialog(...s)),class:_(["file-upload-btn",{"has-file":d.hasFile}])},[t[10]||(t[10]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),l("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),l("polyline",{points:"21,15 16,10 5,21"})],-1)),h(" "+o(d.fileButtonText),1)],2),c.selectedFile&&!e.multiple?(n(),a("div",se,[l("span",ae,o(c.selectedFile.name)+" ("+o(d.formatFileSize(c.selectedFile.size))+")",1),l("button",{type:"button",onClick:t[8]||(t[8]=(...s)=>d.removeFile&&d.removeFile(...s)),class:"remove-file-btn"},"Ã—")])):r("",!0),c.selectedFiles&&e.multiple&&c.selectedFiles.length>0?(n(),a("div",ne,[l("div",de,[l("span",null,"Selected Files ("+o(c.selectedFiles.length)+")",1),l("button",{type:"button",onClick:t[9]||(t[9]=(...s)=>d.clearAllFiles&&d.clearAllFiles(...s)),class:"clear-all-btn"},"Clear All")]),l("div",oe,[(n(!0),a(v,null,y(c.selectedFiles,(s,m)=>(n(),a("div",{key:m,class:"file-item"},[l("div",re,[l("span",ue,o(s.name),1),l("span",ce,o(d.formatFileSize(s.size)),1)]),l("button",{type:"button",onClick:Fe=>d.removeFileAt(m),class:"remove-file-btn"},"Ã—",8,he)]))),128))])])):r("",!0)]),e.note?(n(),a("div",me,o(e.note),1)):r("",!0),c.filePreview&&e.accept&&e.accept.includes("image")?(n(),a("div",fe,[l("img",{src:c.filePreview,alt:`${e.label} preview`},null,8,ve)])):r("",!0)])):e.type==="row"?(n(),a("div",ye,[F(i.$slots,"default",{},void 0)])):r("",!0)])}const ke=g(B,[["render",ge],["__scopeId","data-v-36d40b24"]]);export{be as B,ke as F};
