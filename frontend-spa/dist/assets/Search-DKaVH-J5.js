import{K as S,_ as $,g as P,h as c,k as R,A as q,I as w,c as l,a as o,t as _,d as n,F as y,q as p,z as B,o as s,m}from"./index-DTmEoMLP.js";import{A as x}from"./ArtistCard-DYJ_1iuu.js";import{P as F}from"./PlaylistCard-BFZCcWWa.js";import{A as L}from"./AlbumCard-QnN6sERx.js";/* empty css                                                                 *//* empty css                                                                     */const N={async search(d){return d?await S(`/api/search?q=${d}`):{status:"error",data:{}}}},T={class:"search-view"},I={class:"search-title"},V={key:0,class:"loading"},z={key:1,class:"error"},D={key:2},E={key:0,class:"results-section"},K={key:1,class:"results-section"},M={class:"results-grid"},Q={key:2,class:"results-section"},j={class:"results-grid"},G={key:3,class:"results-section"},H={class:"results-grid"},J={key:4,class:"no-results"},O={__name:"Search",setup(d){const g=q(),h=B();P();const i=c(""),a=c({artists:[],playlists:[],albums:[],songs:[]}),v=c(!1),u=c(null);async function f(r){if(r){v.value=!0,u.value=null;try{const t=await N.search(r);a.value={artists:t.data.artists||[],playlists:t.data.playlists||[],albums:t.data.albums||[],songs:t.data.songs||[]}}catch(t){console.error("Search failed:",t),u.value="Failed to fetch search results. Please try again."}finally{v.value=!1}}}function b(r){h.push(`/artists/${r}`)}function C(r){h.push(`/playlists/${r}`)}function A(r){h.push(`/albums/${r}`)}return R(()=>{i.value=g.query.q||"",f(i.value)}),w(()=>g.query.q,r=>{i.value=r||"",f(i.value)}),(r,t)=>(s(),l("div",T,[o("h1",I,'Search Results for "'+_(i.value)+'"',1),v.value?(s(),l("div",V,"Loading...")):u.value?(s(),l("div",z,_(u.value),1)):(s(),l("div",D,[a.value.songs.length?(s(),l("section",E)):n("",!0),a.value.artists.length?(s(),l("section",K,[t[0]||(t[0]=o("h2",{class:"section-title"},"Artists",-1)),o("div",M,[(s(!0),l(y,null,p(a.value.artists,e=>(s(),m(x,{key:e.artist_id,artist:e,onClick:k=>b(e.artist_id)},null,8,["artist","onClick"]))),128))])])):n("",!0),a.value.playlists.length?(s(),l("section",Q,[t[1]||(t[1]=o("h2",{class:"section-title"},"Playlists",-1)),o("div",j,[(s(!0),l(y,null,p(a.value.playlists,e=>(s(),m(F,{key:e.playlist_id,playlist:e,onClick:k=>C(e.playlist_id)},null,8,["playlist","onClick"]))),128))])])):n("",!0),a.value.albums.length?(s(),l("section",G,[t[2]||(t[2]=o("h2",{class:"section-title"},"Albums",-1)),o("div",H,[(s(!0),l(y,null,p(a.value.albums,e=>(s(),m(L,{title:e.title,cover_url:e.cover_url,key:e.album_id,album:e,onClick:k=>A(e.album_id)},null,8,["title","cover_url","album","onClick"]))),128))])])):n("",!0),!a.value.artists.length&&!a.value.playlists.length&&!a.value.albums.length&&!a.value.songs.length?(s(),l("div",J,' No results found for "'+_(i.value)+'". ',1)):n("",!0)]))]))}},ts=$(O,[["__scopeId","data-v-632455bd"]]);export{ts as default};
