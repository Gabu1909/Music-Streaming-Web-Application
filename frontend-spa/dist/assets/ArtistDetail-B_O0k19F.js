import{x as A,j as _,C as k,_ as V,g as $,h as B,A as E,k as N,c as u,d,a as s,m as j,b as a,f as K,t as h,l as S,F as R,q as L,D as T,o as n,p as U,P as H}from"./index-CFB-G1Nn.js";import{_ as D}from"./TrackList-BXYnJ8oV.js";function M(r){const{data:m,isLoading:y,error:g,refetch:p}=A({queryKey:["artist",r],queryFn:async()=>(await k.getArtistDetails(r)).data?.artist||{},onError:t=>{console.error("Failed to fetch artist details:",t)}}),{data:c}=A({queryKey:["artistSongs",r],queryFn:async()=>((await k.getArtistSongs(r)).data?.songs||[]).map(e=>({...e,id:e.song_id||e.id||`${r}-${e.title}`,artist:e.artist||m.value?.name||"Unknown Artist",audio_url:e.audio_url||""})),onError:t=>{console.error("Failed to fetch artist songs:",t)}}),{data:f}=A({queryKey:["artistAlbums",r],queryFn:async()=>(await k.getAlbumsByArtist(r)).data?.albums||[],onError:t=>{console.error("Failed to fetch artist albums:",t)}});return{artist:_(()=>m.value||{}),artistSongs:_(()=>c.value||[]),artistAlbums:_(()=>f.value||[]),isLoading:y,error:g,refetch:p}}const Q={class:"artist-detail"},z={key:0,class:"artist-header"},G=["src"],J={class:"artist-info"},O={key:0,class:"artist-bio"},W={class:"artist-actions"},X=["disabled"],Y={class:"artist-content mt-4"},Z={key:1,class:"artist-content mt-4"},I={key:2,class:"artist-albums mt-5"},tt={class:"album-list"},st={class:"album-card"},at=["src"],et={class:"album-title"},rt={__name:"ArtistDetail",setup(r){const m=E(),{currentSong:y,initAudio:g,playSong:p}=$(),c=B(null),f=m.params.id,{artist:t,artistSongs:b,artistAlbums:e}=M(f),F=_(()=>b.value?.slice(0,5)||[]),i=_(()=>b.value||[]),q=o=>o?`/${o.replace(/^public\//,"")}`:"/default-artist.jpg",C=o=>o?`/${o.replace(/^public\//,"")}`:"/default-album.jpg",x=async()=>{i.value.length&&await p(i.value[0],i.value)},w=async o=>{await p(o,i.value)};return N(async()=>{c.value&&g(c.value)}),(o,l)=>{const P=T("router-link");return n(),u("div",Q,[a(t)&&(a(t).id||a(t).artist_id)?(n(),u("div",z,[s("img",{class:"artist-image",src:q(a(t).avatar_url),alt:"Artist Image"},null,8,G),s("div",J,[s("h1",null,[K(h(a(t).name),1),l[0]||(l[0]=s("span",{class:"verified-icon fas fa-check-circle",title:"Verified Artist"},null,-1))]),a(t).bio?(n(),u("p",O,h(a(t).bio),1)):d("",!0),s("div",W,[s("button",{class:"play-btn",onClick:x,disabled:!i.value.length},"Play All",8,X)])])])):d("",!0),s("div",Y,[l[1]||(l[1]=s("h2",null,"Popular Tracks",-1)),S(D,{tracks:F.value,onPlay:w},null,8,["tracks"])]),i.value.length?(n(),u("div",Z,[l[2]||(l[2]=s("h2",null,"All Songs",-1)),S(D,{tracks:i.value,onPlay:w},null,8,["tracks"])])):d("",!0),a(e)&&a(e).length?(n(),u("div",I,[l[3]||(l[3]=s("h2",null,"Albums",-1)),s("div",tt,[(n(!0),u(R,null,L(a(e),v=>(n(),u("div",{class:"album-card",key:v.id},[S(P,{to:`/albums/${v.album_id}`,class:"album-card-link"},{default:U(()=>[s("div",st,[s("img",{class:"album-cover",src:C(v.cover_url),alt:"Album Cover"},null,8,at),s("div",et,h(v.title),1)])]),_:2},1032,["to"])]))),128))])])):d("",!0),s("audio",{ref_key:"audioRef",ref:c,preload:"metadata"},null,512),a(y)?(n(),j(H,{key:3})):d("",!0)])}}},nt=V(rt,[["__scopeId","data-v-4a8153e9"]]);export{nt as default};
